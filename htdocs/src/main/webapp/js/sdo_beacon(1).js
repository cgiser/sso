(function(D,B,F){if(D.sdoLogger)return;var E={jsName:"sdo_beacon.js",defaultVer:20111010,getVersion:function(){var _=this.jsName,$=new RegExp(_+"(\\?(.*))?$"),D=B.getElementsByTagName("script");for(var E=0;E<D.length;E++){var C=D[E];if(C.src&&C.src.match($)){var A=C.src.match($)[2];if(A&&(/^[a-zA-Z0-9]+$/).test(A))return A}}return this.defaultVer},getCookie:function(_){var $=B.cookie.match(new RegExp("(^| )"+_+"=([^;]*)(;|$)"));return($!=null)?unescape($[2]):"-"},setCookie:function(F,E,$,D,C,A){var _=new Date;$=typeof $=="undefined"?"":";expires="+new Date(_.getTime()+($*24*60*60*1000)).toUTCString();B.cookie=F+"="+E+$+((C==null)?"":("; domain="+C))+((D==null)?"":("; path="+D))+((A==true)?"; secure":"")},parseError:function(_){var $="";for(var A in _)$+=A+"="+_[A]+";";return $},getRand:function(){var $=function($,_,A){$=$.toString(16).split("");_=_/4|0;A=A/4|0;for(var B=_;B<=A;B++)!$[B]&&($[B]=0);return $.slice(_,A+1).join("")},A=function($){return Math.random()*($+1)|0},_=function(A){A=A.replace(/./g,function($){return $.charCodeAt()}).split("");var _=16777619,$=2166136261;for(var B=0;B<A.length;B++)$=($^A[B])*_;$+=$<<13;$^=$>>7;$+=$<<3;$^=$>>17;$+=$<<5;$=$&2147483647;return $.toString(16)};return function(){var B=+new Date+12216643200000;return[$(B,0,31),$(B,32,47),$(B,48,59),A(15).toString(16),$(A(4095,1),0,7),$(A(4095,1),0,7),$(A(8191,1),0,7),$(A(8191,1),8,15),$(A(8191,1),0,7),$(A(8191,1),8,15),$(A(8191,1),0,15),_(location.href)].join("")}}(),getParam:function(C,B){var _=null;if(C)if(E.isString(C)||E.isNumber(C))_=C;else if(E.isObject(C)){var A="";for(var D in C)if(C[D]!=null&&C[D]!=F){var $=C[D];if(E.isArray($))$=$.join(",");else if(E.isDate($))$=$.getTime();A+=D+"="+$+"&"}A=A.substring(0,A.length-1);_=A}else if(E.isArray(C)){if(C.length&C.length>0)_=C.join(",")}else _=C.toString();if(!_)_="-";if(B){_=encodeURIComponent(_);_=this.base64encode(_)}return _},base64encode:function(_){var D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",F,E,C,$,A,B;C=_.length;E=0;F="";while(E<C){$=_.charCodeAt(E++)&255;if(E==C){F+=D.charAt($>>2);F+=D.charAt(($&3)<<4);F+="==";break}A=_.charCodeAt(E++);if(E==C){F+=D.charAt($>>2);F+=D.charAt((($&3)<<4)|((A&240)>>4));F+=D.charAt((A&15)<<2);F+="=";break}B=_.charCodeAt(E++);F+=D.charAt($>>2);F+=D.charAt((($&3)<<4)|((A&240)>>4));F+=D.charAt(((A&15)<<2)|((B&192)>>6));F+=D.charAt(B&63)}return F},isString:function($){return($!=null)&&($!=F)&&(typeof $=="string")&&($.constructor==String)},isNumber:function($){return(typeof $=="number")&&($.constructor==Number)},isDate:function($){return $&&(typeof $=="object")&&$.constructor==Date},isArray:function($){return $&&(typeof $=="object")&&($.constructor==Array)},isObject:function($){return $&&(typeof $=="object")&&($.constructor==Object)}},G,C=function(){var $=[];return function(A){var _=$.push(new Image)-1;$[_].src=A}}(),J,A,K,H=function(){var $=K.pop();$&&$();return!!$},_=function(E){var B=E.length,A=2048,C=Math.min(2083,A),_=65536,$=Math.min(A,_);if(!+"\v1"||D.XDomainRequest)return B<=C;return B<=$},I=isNaN(I=+E.getCookie("beacon_visit_count"))?1:I+1;E.setCookie("beacon_visit_count",I);var $={uvId:"sdo_beacon_id",memId:"sdo_dw_track",beaconUrl:"dwtracking.sdo.com/a.gif",errorUrl:"dwtracking.sdo.com/dw/error.html",clickUrl:"dwtracking.sdo.com/ubs/click.html",tracking:function(){if(D.sdoLogger)return;else{this.protocol=(B.URL.substring(0,B.URL.indexOf("://")))+"://";if(typeof _beacon_pageid!="undefined")this.pageId=_beacon_pageid;else this.pageId=E.getRand();this.beaconLog()}},beaconLog:function(){try{var M=this;G="{"+E.getParam(this.getRefer())+"}";var P={};this.ptId=E.getCookie(this.memId);this.cId=E.getCookie(this.uvId);var C=this.ptId,N=E.getCookie("b_t_s"),_=N=="-"||N.indexOf("s")==-1;if(C!="-")P.memId=C;if(_){P.subIsNew=1;E.setCookie("b_t_s",N=="-"?"s":(N+"s"),10000,"/")}else P.subIsNew=0;var O="{"+E.getParam(P)+"}",F=this.pageId,$=B.title;if($.length>50)$=$.substring(0,49);$=encodeURIComponent($);var L=B.charset||B.characterSet;A={pageId:F,title:$,charset:L,sr:D.screen.width+"*"+D.screen.height,vc:I,jv:+navigator.javaEnabled(),cd:D.screen.colorDepth,fv:function(){var _=navigator.plugins;if(_&&_.length){for(var A=_.length;A--;)if(/Shockwave Flash/.test(_[A].name))return _[A].description.substr(16)}else if(D.ActiveXObject){try{return new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/^WIN /i,"")}catch($){}}return 0}()};typeof _beacon!="undefined"&&E.isString(_beacon)&&(A.cv=encodeURIComponent(_beacon));K=[function(){delete A.charset},function(){delete A.sr},function(){delete A.vc},function(){delete A.cd},function(){delete A.jv},function(){delete A.fv},function(){delete A.title},function(){delete A.cv},function(){G=G.split("?")[0]},function(){var $=decodeURIComponent(A.title);A.title=encodeURIComponent($.substr(0,19))}];(J=function(){var $="{"+E.getParam(A)+"}",_={"r":G,"a":O,"b":$};M.sendRequest(M.beaconUrl,_)})()}catch(H){this.sendError(H)}},getRefer:function(){var _=B.referrer;_==location.href&&(_="");try{_=""==_?opener.location:_;_=""==_?"-":_}catch($){_="-"}return _},clickLog:function($){try{var A=this.pageId;if(!A)A=this.pageId=E.getRand();var _=this.authId;if(!_)_="-";if(E.isObject($)){$.pageId=A;$.authId=_}else if(E.isString($)&&$.indexOf("=")>0)$+="&pageId="+A+"&authId="+_;else if(E.isArray($)){$.push("pageId="+A);$.push("authId="+_);$=$.join("&")}else $={"pageId":A,"authId":_};this.sendRequest(this.clickUrl,$)}catch(B){this.sendError(B)}},sendError:function(_){var B=E.parseError(_),A=this.errorUrl+"?type=send&exception="+encodeURIComponent(B.toString()),$=new Image();$.onload=function(){$=null};$.src=this.protocol+A},sendRequest:function(G,D){var B="",A=new Date();try{if(D){B=E.getParam(D,true);B=(B=="")?B:(B+"&")}var $="ver="+E.getVersion()+"&time="+A.getTime();G=this.protocol+G+"?"+B+$;if(!_(G))if(H())return J();C(G)}catch(F){this.sendError(F)}}};$.tracking();D.sdoLogger=$})(window,document)