(function(j,t,f){if(j.sdoLogger){return}var y={jsName:"sdo_beacon.js",defaultVer:20121109,getVersion:function(){var E=this.jsName;var A=new RegExp(E+"(\\?(.*))?$");var D=t.getElementsByTagName("script");for(var C=0;C<D.length;C++){var B=D[C];if(B.src&&B.src.match(A)){var z=B.src.match(A)[2];if(z&&(/^[a-zA-Z0-9]+$/).test(z)){return z}}}return this.defaultVer},getCookie:function(A){var z=t.cookie.match(new RegExp("(^| )"+A+"=([^;]*)(;|$)"));return(z!=null)?unescape(z[2]):"-"},setCookie:function(E,B,F,D,A,C){var z=new Date;F=typeof F=="undefined"?"":";expires="+new Date(z.getTime()+(F*24*60*60*1000)).toUTCString();t.cookie=E+"="+B+F+((A==null)?"":("; domain="+A))+((D==null)?"":("; path="+D))+((C==true)?"; secure":"")},parseError:function(A){var B="";for(var z in A){B+=z+"="+A[z]+";"}return B},getRand:function(){var B=new Date,z=function(G,H,E){G=G.toString(36).split("");H=H/4|0;E=E/4|0;for(var F=H;F<=E;F++){!G[F]&&(G[F]=0)}return G.slice(H,E+1).join("")},A=function(E){return Math.random()*(E+1)|0},D=function(G){G=G.replace(/./g,function(J){return J.charCodeAt()}).split("");var I=16777619,H=2166136261,E=G.length;for(var F=0;F<E;F++){H=(H^G[F])*I}H+=H<<13;H^=H>>7;H+=H<<3;H^=H>>17;H+=H<<5;H=H&2147483647;H=H.toString(36);H.length<6&&(H+=(E%36).toString(36));return H},C=[screen.width,screen.height,navigator.plugins.length,navigator.javaEnabled(),screen.colorDepth,location.href,navigator.userAgent].join("");return function(){var H=new Date,G=(+H+631152000000).toString(36),E=z(A(4095),0,7)+z(A(8191),0,7)+z(A(8191),0,8),I=Math.random()*(251)+50|0,F=[];G.length<9&&(G+=(H%36).toString(36));for(;I--;){F.push(Math.random())}return D(C)+D([t.documentElement.offsetWidth,t.documentElement.offsetHeight,history.length,new Date-B].join(""))+G+E+D(F.slice(0,10).join(""))+D(F.slice(I-9).join(""))}}(),getParam:function(D,C){var z=null;if(D){if(y.isString(D)||y.isNumber(D)){z=D}else{if(y.isObject(D)){var E="";for(var B in D){if(D[B]!=null&&D[B]!=f){var A=D[B];if(y.isArray(A)){A=A.join(",")}else{if(y.isDate(A)){A=A.getTime()}}E+=B+"="+A+"&"}}E=E.substring(0,E.length-1);z=E}else{if(y.isArray(D)){if(D.length&D.length>0){z=D.join(",")}}else{z=D.toString()}}}}if(!z){z="-"}if(C){z=encodeURIComponent(z);z=this.base64encode(z)}return z},base64encode:function(G){var A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var C,E,z;var F,D,B;z=G.length;E=0;C="";while(E<z){F=G.charCodeAt(E++)&255;if(E==z){C+=A.charAt(F>>2);C+=A.charAt((F&3)<<4);C+="==";break}D=G.charCodeAt(E++);if(E==z){C+=A.charAt(F>>2);C+=A.charAt(((F&3)<<4)|((D&240)>>4));C+=A.charAt((D&15)<<2);C+="=";break}B=G.charCodeAt(E++);C+=A.charAt(F>>2);C+=A.charAt(((F&3)<<4)|((D&240)>>4));C+=A.charAt(((D&15)<<2)|((B&192)>>6));C+=A.charAt(B&63)}return C},isString:function(z){return(z!=null)&&(z!=f)&&(typeof z=="string")&&(z.constructor==String)},isNumber:function(z){return(typeof z=="number")&&(z.constructor==Number)},isDate:function(z){return z&&(typeof z=="object")&&z.constructor==Date},isArray:function(z){return z&&(typeof z=="object")&&(z.constructor==Array)},isObject:function(z){return z&&(typeof z=="object")&&(z.constructor==Object)},createFlash:function(z,B,C){C=C&&C.replace(/"/g,"&quot;");var A;B.id=B.id||"sdo_beacon_flash";if("classid" in t.createElement("object")){A='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" name="'+B.id+'" '+(B.id?'id="'+B.id+'" ':"")+'width="'+B.width+'" height="'+B.height+'"><param name="allowScriptAccess" value="always" /><param name="quality" value="high" /><param name="wmode" value="window" /><param name="movie" value="'+B.src+'" />'+(C?'<param name="flashvars" value="'+C+'" />':"")+"</object>"}else{A='<embed style="width:1px;height:1px;" wmode="window" src="'+B.src+'" quality="high" name="'+B.id+'" '+(B.id?'id="'+B.id+'" ':"")+(C?'flashVars="'+C+'" ':"")+'width="'+B.width+'" height="'+B.height+'" allowScriptAccess="always" type="application/x-shockwave-flash"/>'}z.innerHTML=A;return z.firstChild}},g,l,q,n=false,o,p=8000,d="SNDA_SDO_BEACON_0",e="http://ipic.staticsdo.com/external/share.swf",x="http://bf.snyu.sdo.com/bf?fn=sdoLogger.__FC__",i,k,w=function(){var A=navigator.plugins;if(A&&A.length){for(var z=A.length;z--;){if(/Shockwave Flash/.test(A[z].name)){return A[z].description.substr(16)}}}else{if(j.ActiveXObject){try{return new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/^WIN /i,"")}catch(B){}}}return 0}(),h,s=function(){var z=[];return function(B){var A=z.push(new Image)-1;z[A].src=B}}(),v,c,u,b=function(){var z=u.pop();z&&z();return !!z},r=function(B){var z=B.length,D=2048,C=Math.min(2083,D),A=65536,E=Math.min(D,A);if(!+"\v1"||j.XDomainRequest){return z<=C}return z<=E},a=isNaN(a=+y.getCookie("beacon_visit_count"))?1:a+1;y.setCookie("beacon_visit_count",a);var m={uvId:"sdo_beacon_id",memId:"sdo_dw_track",beaconUrl:"dwtracking.sdo.com/a.gif",errorUrl:"dwtracking.sdo.com/dw/error.html",clickUrl:"dwtracking.sdo.com/ubs/click.html",pageId:typeof _beacon_pageid!="undefined"?_beacon_pageid:(_beacon_pageid=y.getRand()),protocol:function(){var z=location.protocol;if("file:"===z){z="http:"}return z+"//"}(),tracking:function(){this.beaconLog()},beaconLog:function(){try{var F=this;h="{"+y.getParam(this.getRefer())+"}";var G={};this.ptId=y.getCookie(this.memId);this.cId=y.getCookie(this.uvId);var E=this.ptId;var z=y.getCookie("b_t_s");var C=z=="-"||z.indexOf("s")==-1;if(E!="-"){G.memId=E}if(C){G.subIsNew=1;y.setCookie("b_t_s",z=="-"?"s":(z+"s"),10000,"/")}else{G.subIsNew=0}var I="{"+y.getParam(G)+"}";var A=this.pageId;var H=t.title;if(H.length>50){H=H.substring(0,49)}H=encodeURIComponent(H);var B=t.charset||t.characterSet;c={pageId:A,title:H,charset:B,sr:j.screen.width+"*"+j.screen.height,vc:a,jv:+navigator.javaEnabled(),cd:j.screen.colorDepth,fv:w};typeof _beacon!="undefined"&&y.isString(_beacon)&&(c.cv=encodeURIComponent(_beacon));c.fc=i;u=[function(){delete c.charset},function(){delete c.sr},function(){delete c.vc},function(){delete c.cd},function(){delete c.jv},function(){delete c.fv},function(){delete c.title},function(){delete c.cv},function(){h=h.split("?")[0]},function(){var J=decodeURIComponent(c.title);c.title=encodeURIComponent(J.substr(0,19))}];(v=function(){var J="{"+y.getParam(c)+"}";var K={r:h,a:I,b:J};F.sendRequest(F.beaconUrl,K)})()}catch(D){this.sendError(D)}},getRefer:function(){var z=t.referrer;z==location.href&&(z="");try{z=""==z?opener.location:z;z=""==z?"-":z}catch(A){z="-"}return z},clickLog:function(A){try{var z=this.pageId;if(!z){z=this.pageId=y.getRand()}var C=this.authId;if(!C){C="-"}if(y.isObject(A)){A.pageId=z;A.authId=C}else{if(y.isString(A)&&A.indexOf("=")>0){A+="&pageId="+z+"&authId="+C}else{if(y.isArray(A)){A.push("pageId="+z);A.push("authId="+C);A=A.join("&")}else{A={pageId:z,authId:C}}}}this.sendRequest(this.clickUrl,A)}catch(B){this.sendError(B)}},sendError:function(B){var A=y.parseError(B);var z=this.errorUrl+"?type=send&exception="+encodeURIComponent(A.toString());var C=new Image();C.onload=function(){C=null};C.src=this.protocol+z},sendRequest:function(A,E){var B="";var D=new Date();try{if(E){B=y.getParam(E,true);B=(B=="")?B:(B+"&")}var z="ver="+y.getVersion()+"&time="+D.getTime();A=this.protocol+A+"?"+B+z;if(!r(A)){if(b()){return v()}}s(A)}catch(C){this.sendError(C)}}};if(m.protocol=="http://"){if(w){(k=function(){var z=t.body;if(z){q=function(){var C,B;try{C=l.get(d)}catch(A){i=-1;m.tracking();return}if(C){i=C;g.removeChild(l);l=y.createFlash(g,{width:1,height:1,src:"http://sdk.cdn-data.snyu.com/flash/ext/so.swf"})}else{i="";m.__FC__=function(D){C=D;l.flush(d,D);g.removeChild(l);l=y.createFlash(g,{width:1,height:1,src:"http://sdk.cdn-data.snyu.com/flash/ext/so.swf"})};B=t.createElement("script");z.insertBefore(B,z.lastChild);B.src=x}m.__FLASHREADY__=function(){try{l.flush(d,C)}catch(D){setTimeout(function(){try{l.flush(d,C)}catch(E){}},250)}};m.tracking()};g=t.createElement("div");z.insertBefore(g,z.lastChild);g.style.cssText="position:absolute;display:block;left:-500px;width:1px;height:1px;";m.__FLASHREADY__=function(){if(n){return}n=true;clearTimeout(o);if(l.get&&l.flush){q()}else{setTimeout(q,100)}};l=y.createFlash(g,{width:1,height:1,src:e});o=setTimeout(function(){if(n){return}n=true;if(l&&l.get&&l.flush){q()}else{i=-1;m.tracking()}},p)}else{setTimeout(k,50)}})()}else{i=0;m.tracking()}}else{i=-2;m.tracking()}j.sdoLogger=m})(window,document);